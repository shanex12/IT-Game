<!doctype html>
<html lang="th">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡πÄ‡∏Å‡∏°‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô - ‰∏≠ÊñáÊ∏∏Êàè</title>
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      overflow: auto;
    }

    .page {
      width: 100%;
      min-height: 100%;
      display: none;
    }

    .page.active {
      display: flex;
      flex-direction: column;
    }

    .game-container {
      width: 100%;
      min-height: 100%;
      font-family: 'Georgia', 'STSong', 'SimSun', serif;
      display: flex;
      flex-direction: column;
      padding: 24px;
      background: linear-gradient(135deg, #1a0000 0%, #4a0000 50%, #8b0000 100%);
      position: relative;
    }

    .game-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: 
        radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(255, 0, 0, 0.1) 0%, transparent 50%);
      pointer-events: none;
    }

    .header {
      text-align: center;
      margin-bottom: 24px;
      position: relative;
      z-index: 1;
    }

    .game-title {
      font-size: 42px;
      font-weight: bold;
      margin-bottom: 8px;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.5), 0 0 20px rgba(255, 215, 0, 0.5);
      color: #ffd700;
      letter-spacing: 4px;
    }

    .welcome-text {
      font-size: 18px;
      color: #ffe4b5;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    .stats-bar {
      display: flex;
      justify-content: space-around;
      gap: 16px;
      margin-bottom: 24px;
      flex-wrap: wrap;
      position: relative;
      z-index: 1;
    }

    .stat-card {
      flex: 1;
      min-width: 120px;
      padding: 16px;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
      border: 2px solid #ffd700;
      background: linear-gradient(135deg, #8b0000 0%, #dc143c 100%);
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
      animation: rotate 20s linear infinite;
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .stat-label {
      font-size: 14px;
      margin-bottom: 4px;
      color: #ffe4b5;
      position: relative;
      z-index: 1;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }

    .stat-value {
      font-size: 28px;
      font-weight: bold;
      color: #ffd700;
      position: relative;
      z-index: 1;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    .game-area {
      flex: 1;
      border-radius: 20px;
      padding: 32px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.5);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin-bottom: 24px;
      background: rgba(139, 0, 0, 0.6);
      backdrop-filter: blur(10px);
      border: 3px solid #ffd700;
      position: relative;
      z-index: 1;
    }

    .start-screen {
      text-align: center;
      width: 100%;
  height: 100vh;
  min-height: 100vh;
  justify-content: center;
  align-items: center;
    }

    .start-icon {
      font-size: 80px;
      margin-bottom: 24px;
      filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.5));
    }

    .start-message {
      font-size: 28px;
      margin-bottom: 32px;
      color: #ffd700;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
      font-weight: bold;
    }

    .quiz-screen {
      width: 100%;
      max-width: 600px;
      display: none;
    }

    .quiz-screen.active {
      display: block;
    }

    .character-display {
      text-align: center;
      margin-bottom: 32px;
    }

    .chinese-character {
      font-size: 90px;
      margin-bottom: 12px;
      font-weight: bold;
      color: #ffd700;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.5), 0 0 30px rgba(255, 215, 0, 0.6);
    }

    .pinyin {
      font-size: 28px;
      margin-bottom: 8px;
      color: #ffe4b5;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    .question-text {
      font-size: 20px;
      margin-bottom: 24px;
      text-align: center;
      color: #ffe4b5;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    .options-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-bottom: 24px;
    }

    .option-button {
      padding: 20px;
      font-size: 18px;
      border: 3px solid #ffd700;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 600;
      background: linear-gradient(135deg, #8b0000 0%, #dc143c 100%);
      color: #ffe4b5;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }

    .option-button:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(255, 215, 0, 0.4);
      border-color: #ffed4e;
    }

    .option-button:disabled {
      cursor: not-allowed;
      opacity: 0.6;
    }

    .option-button.correct {
      border-color: #00ff00;
      background: linear-gradient(135deg, #006400 0%, #32cd32 100%);
      animation: pulse 0.5s;
    }

    .option-button.incorrect {
      border-color: #ff0000;
      background: linear-gradient(135deg, #8b0000 0%, #ff0000 100%);
      animation: shake 0.5s;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }

    .feedback {
      text-align: center;
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 16px;
      min-height: 30px;
      color: #ffd700;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    .action-button {
      padding: 16px 48px;
      font-size: 20px;
      border: 3px solid #ffd700;
      border-radius: 12px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
      display: block;
      margin: 0 auto;
      background: linear-gradient(135deg, #8b0000 0%, #dc143c 100%);
      color: #ffd700;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    .action-button:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(255, 215, 0, 0.5);
      border-color: #ffed4e;
    }

    .action-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 16px 24px;
      border-radius: 8px;
      font-weight: bold;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      z-index: 1000;
      animation: slideIn 0.3s;
      color: #ffffff;
      border: 2px solid #ffd700;
    }

    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .result-detail {
      font-size: 20px;
      margin-bottom: 32px;
      white-space: pre-line;
      color: #ffe4b5;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    .final-score {
      font-size: 52px;
      margin: 20px 0;
      font-weight: bold;
      color: #ffd700;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.5), 0 0 20px rgba(255, 215, 0, 0.5);
    }

    .game-card {
      transition: all 0.3s;
      padding: 24px;
      border-radius: 16px;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
      background: linear-gradient(135deg, #8b0000 0%, #dc143c 100%);
      border: 3px solid #ffd700;
      color: #ffe4b5;
    }

    .game-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 20px rgba(255, 215, 0, 0.4);
      border-color: #ffed4e;
    }

    .menu-title {
      font-size: 32px;
      font-weight: bold;
      margin-bottom: 12px;
      color: #ffd700;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
    }

    .menu-subtitle {
      font-size: 16px;
      color: #ffe4b5;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }

    .small-button {
      padding: 12px 24px;
      font-size: 16px;
      background: linear-gradient(135deg, #b8860b 0%, #ffd700 100%);
      color: #1a0000;
      border: 2px solid #ffd700;
      font-weight: bold;
      text-shadow: none;
    }

    .small-button:hover {
      background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
    }

    .login-screen {
      max-width: 400px;
      width: 100%;
      margin: 0 auto;
    }

    .login-form {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .form-label {
      font-size: 18px;
      font-weight: bold;
      color: #ffd700;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    .form-input {
      padding: 12px 16px;
      font-size: 16px;
      border: 3px solid #ffd700;
      border-radius: 8px;
      background: rgba(139, 0, 0, 0.6);
      color: #ffe4b5;
      font-weight: 600;
    }

    .form-input:focus {
      outline: none;
      border-color: #ffed4e;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }

    .admin-panel {
      max-width: 500px;
      width: 100%;
      margin: 0 auto;
    }

    .admin-controls {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-bottom: 24px;
    }

    .coin-control {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .coin-input {
      flex: 1;
      padding: 12px;
      font-size: 18px;
      border: 3px solid #ffd700;
      border-radius: 8px;
      background: rgba(139, 0, 0, 0.6);
      color: #ffe4b5;
      font-weight: bold;
      text-align: center;
    }

    .user-info {
      text-align: right;
      margin-bottom: 16px;
      color: #ffe4b5;
      font-size: 16px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }

    .logout-button {
      padding: 8px 16px;
      font-size: 14px;
      background: linear-gradient(135deg, #8b0000 0%, #dc143c 100%);
      color: #ffd700;
      border: 2px solid #ffd700;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      margin-left: 12px;
    }

    .logout-button:hover {
      background: linear-gradient(135deg, #dc143c 0%, #ff0000 100%);
      border-color: #ffed4e;
    }

    .dragon-decoration {
      position: absolute;
      font-size: 60px;
      opacity: 0.3;
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }

    .dragon-left {
      top: 20%;
      left: 5%;
    }

    .dragon-right {
      top: 60%;
      right: 5%;
      animation-delay: 3s;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- Page 1: Welcome Page -->
  <div class="page active" id="welcomePage">
   <div class="game-container">
    <div class="dragon-decoration dragon-left">
     üêâ
    </div>
    <div class="dragon-decoration dragon-right">
     üê≤
    </div>
    <div class="game-area">
     <div class="start-screen">
      <div class="start-icon">
       üèÆ
      </div>
      <div class="start-message menu-title">
       ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏Å‡∏°‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô
      </div>
      <div class="welcome-text menu-subtitle" style="margin-bottom: 32px;">
       Ê¨¢ËøéÊù•Âà∞‰∏≠ÊñáËØçÊ±áÊ∏∏Êàè
      </div><button class="action-button" id="startGameButton" style="font-size: 28px; padding: 20px 60px;"> üéÆ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° ÂºÄÂßãÊ∏∏Êàè </button> <button class="action-button small-button" id="adminLoginButton" style="margin-top: 20px; padding: 10px 24px; font-size: 14px;"> üîë ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô </button>
     </div>
    </div>
   </div>
  </div><!-- Page 2: Game Page -->
  <div class="page" id="gamePage">
   <div class="game-container">
    <div class="dragon-decoration dragon-left">
     üêâ
    </div>
    <div class="dragon-decoration dragon-right">
     üê≤
    </div><!-- Admin Login Modal -->
    <div class="game-area" id="adminLoginScreen" style="display: none;">
     <div class="start-screen login-screen">
      <div class="start-icon">
       üîê
      </div>
      <div class="start-message menu-title">
       ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
      </div>
      <div class="welcome-text menu-subtitle" style="margin-bottom: 32px;">
       Admin Login ÁÆ°ÁêÜÂëòÁôªÂΩï
      </div>
      <form class="login-form" id="loginForm">
       <div class="form-group"><label class="form-label" for="username">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ Áî®Êà∑Âêç</label> <input type="text" id="username" class="form-input" required>
       </div>
       <div class="form-group"><label class="form-label" for="password">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô ÂØÜÁ†Å</label> <input type="password" id="password" class="form-input" required>
       </div><button type="submit" class="action-button">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö ÁôªÂΩï</button> <button type="button" class="action-button small-button" id="cancelLoginButton" style="margin-top: 12px;"> ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å ÂèñÊ∂à </button>
      </form>
     </div>
    </div><!-- Admin Panel -->
    <div class="game-area" id="adminPanel" style="display: none;">
     <div class="user-info"><span>üë§ <strong id="adminUsername"></strong></span> <button class="logout-button" id="adminLogout">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö ÈÄÄÂá∫</button>
     </div>
     <div class="start-screen admin-panel">
      <div class="start-icon">
       üëë
      </div>
      <div class="start-message menu-title">
       ‡πÅ‡∏ú‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô ÁÆ°ÁêÜÈù¢Êùø
      </div>
      <div class="admin-controls">
       <div style="padding: 20px; background: rgba(255, 215, 0, 0.1); border-radius: 12px; border: 2px solid #ffd700;">
        <div style="color: #ffd700; font-weight: bold; margin-bottom: 16px; font-size: 20px; text-align: center;">
         üí∞ ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <span id="adminCoinDisplay">0</span>
        </div>
        <div class="coin-control"><input type="number" id="coinAmount" class="coin-input" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç" value="100"> <button class="action-button" id="addCoinsBtn" style="padding: 12px 24px; font-size: 16px;"> ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç Âä†ÈáëÂ∏Å </button>
        </div>
       </div>
       <div style="padding: 20px; background: rgba(255, 215, 0, 0.1); border-radius: 12px; border: 2px solid #ffd700;">
        <div style="color: #ffd700; font-weight: bold; margin-bottom: 12px; font-size: 18px;">
         üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÄ‡∏Å‡∏°
        </div>
        <div style="color: #ffe4b5; font-size: 16px; line-height: 2;">
         ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: <span id="adminHighScore" style="color: #ffd700; font-weight: bold;">0</span><br>
          ‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ: <span id="adminUnlockedStages" style="color: #ffd700; font-weight: bold;">1</span>
        </div>
       </div><button class="action-button" id="resetGameBtn"> üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏° ÈáçÁΩÆÊ∏∏Êàè </button>
      </div>
     </div>
    </div><!-- Player Game Area -->
    <div id="playerGameArea" style="display: none; width: 100%;">
     <div class="user-info" style="position: relative; z-index: 10;"><span>üë§ <strong id="playerUsername"></strong></span> <button class="logout-button" id="playerLogout">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö ÈÄÄÂá∫</button>
     </div>
     <div class="header" id="header" style="display: none;">
      <h1 class="game-title">‡πÄ‡∏Å‡∏°‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô üéÆ</h1>
      <p class="welcome-text">‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞!</p>
     </div>
     <div class="stats-bar" id="statsBar" style="display: none;">
      <div class="stat-card" id="coinCard">
       <div class="stat-label">
        ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç üí∞
       </div>
       <div class="stat-value" id="coinValue">
        0
       </div>
      </div>
      <div class="stat-card" id="scoreCard">
       <div class="stat-label">
        ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
       </div>
       <div class="stat-value" id="scoreValue">
        0
       </div>
      </div>
      <div class="stat-card" id="stageCard">
       <div class="stat-label">
        ‡∏î‡πà‡∏≤‡∏ô
       </div>
       <div class="stat-value" id="stageValue">
        1
       </div>
      </div>
      <div class="stat-card" id="streakCard">
       <div class="stat-label">
        ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô
       </div>
       <div class="stat-value" id="streakValue">
        0
       </div>
      </div>
     </div>
     <div class="game-area" id="gameArea">
      <div class="start-screen" id="menuScreen">
       <div class="start-icon">
        üéÆ
       </div>
       <div class="start-message menu-title">
        ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Å‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏≠‡∏ö
       </div>
       <div class="welcome-text menu-subtitle" style="margin-bottom: 16px;">
        ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 1 ‡∏à‡∏≤‡∏Å 3 ‡πÄ‡∏Å‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á
       </div>
       <div style="display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 24px;">
        <div style="font-size: 32px;">
         üí∞
        </div>
        <div style="font-size: 24px; font-weight: bold; color: #ffd700; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);" id="menuCoins">
         0 ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç
        </div><button id="shopButton" class="small-button" style="padding: 8px 20px; border-radius: 8px; cursor: pointer; font-size: 16px; margin-left: 12px;">üè™ ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</button>
       </div>
       <div style="display: flex; gap: 20px; justify-content: center; align-items: stretch; flex-wrap: wrap; width: 100%; max-width: 900px; margin: 0 auto;">
        <div class="game-card" id="quizCard" style="flex: 1; min-width: 250px; max-width: 280px;">
         <div style="font-size: 48px; margin-bottom: 12px;">
          üéØ
         </div>
         <div style="font-size: 22px; font-weight: bold; margin-bottom: 8px; color: #ffd700;">
          ‡∏ó‡∏≤‡∏¢‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå
         </div>
         <div style="font-size: 14px; opacity: 0.9;">
          ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡πÅ‡∏õ‡∏•‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á<br>
          ‡∏ï‡∏≤‡∏°‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
         </div>
        </div>
        <div class="game-card" id="matchCard" style="flex: 1; min-width: 250px; max-width: 280px;">
         <div style="font-size: 48px; margin-bottom: 12px;">
          üîó
         </div>
         <div style="font-size: 22px; font-weight: bold; margin-bottom: 8px; color: #ffd700;">
          ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Ñ‡∏≥
         </div>
         <div style="font-size: 14px; opacity: 0.9;">
          ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Ñ‡∏≥‡∏à‡∏µ‡∏ô‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢<br>
          6 ‡∏Ñ‡∏π‡πà
         </div>
        </div>
        <div class="game-card" id="memoryCard" style="flex: 1; min-width: 250px; max-width: 280px;">
         <div style="font-size: 48px; margin-bottom: 12px;">
          üß†
         </div>
         <div style="font-size: 22px; font-weight: bold; margin-bottom: 8px; color: #ffd700;">
          ‡πÄ‡∏Å‡∏°‡∏à‡∏≥‡∏Ñ‡∏≥
         </div>
         <div style="font-size: 14px; opacity: 0.9;">
          ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏´‡∏≤‡∏Ñ‡∏π‡πà<br>
          8 ‡∏Ñ‡∏π‡πà
         </div>
        </div>
       </div>
      </div>
      <div class="start-screen" id="shopScreen" style="display: none;"><button class="action-button small-button" id="backToMenu" style="position: absolute; top: 20px; left: 20px;">‚¨ÖÔ∏è ‡∏Å‡∏•‡∏±‡∏ö</button>
       <div class="start-icon">
        üè™
       </div>
       <div class="start-message menu-title">
        ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏î‡πà‡∏≤‡∏ô
       </div>
       <div style="display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 32px;">
        <div style="font-size: 28px;">
         üí∞
        </div>
        <div style="font-size: 20px; font-weight: bold; color: #ffd700; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);" id="shopCoins">
         0 ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç
        </div>
       </div>
       <div id="stageList" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; width: 100%; max-width: 900px; margin: 0 auto;"></div>
      </div>
      <div class="start-screen" id="stageSelectScreen" style="display: none;"><button class="action-button small-button" id="backToMenu2" style="position: absolute; top: 20px; left: 20px;">‚¨ÖÔ∏è ‡∏Å‡∏•‡∏±‡∏ö</button>
       <div class="start-icon">
        üéØ
       </div>
       <div class="start-message menu-title" id="gameTypeTitle">
        ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡πà‡∏≤‡∏ô - ‡∏ó‡∏≤‡∏¢‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå
       </div>
       <div style="display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 32px;">
        <div style="font-size: 28px;">
         üí∞
        </div>
        <div style="font-size: 20px; font-weight: bold; color: #ffd700; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);" id="stageSelectCoins">
         0 ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç
        </div>
       </div>
       <div id="stageSelectList" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; width: 100%; max-width: 800px; margin: 0 auto; justify-items: center;"></div>
      </div>
      <div class="quiz-screen" id="quizScreen"><button class="action-button small-button" id="homeButton" style="position: absolute; top: 20px; left: 20px;">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
       <div class="character-display">
        <div class="chinese-character" id="chineseChar">
         ‰Ω†Â•Ω
        </div>
        <div class="pinyin" id="pinyinText">
         n«ê h«éo
        </div>
       </div>
       <div class="question-text">
        ‡∏Ñ‡∏≥‡∏ô‡∏µ‡πâ‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£?
       </div>
       <div class="options-grid" id="optionsGrid"></div>
       <div class="feedback" id="feedback"></div><button class="action-button" id="nextButton" style="display: none;">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‰∏ã‰∏Ä‰∏™</button>
      </div>
      <div class="quiz-screen" id="matchingGame"><button class="action-button small-button" id="homeButton2" style="position: absolute; top: 20px; left: 20px;">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
       <div class="question-text">
        ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Ñ‡∏≥‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢
       </div>
       <div class="feedback" id="matchFeedback"></div>
       <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; width: 100%;">
        <div id="chineseColumn" style="display: flex; flex-direction: column; gap: 12px;"></div>
        <div id="thaiColumn" style="display: flex; flex-direction: column; gap: 12px;"></div>
       </div>
      </div>
      <div class="quiz-screen" id="memoryGame"><button class="action-button small-button" id="homeButton3" style="position: absolute; top: 20px; left: 20px;">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
       <div class="question-text">
        ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡∏Ñ‡∏π‡πà‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô
       </div>
       <div class="feedback" id="memoryFeedback"></div>
       <div id="memoryGrid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; width: 100%; max-width: 500px; margin: 0 auto;"></div>
      </div>
      <div class="start-screen" id="resultScreen" style="display: none;">
       <div class="start-icon">
        üèÜ
       </div>
       <div class="start-message" id="resultMessage">
        ‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°!
       </div>
       <div class="final-score" id="finalScore">
        0 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
       </div>
       <div class="result-detail" id="resultDetails">
        ‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å 0 ‡∏à‡∏≤‡∏Å 15 ‡∏Ç‡πâ‡∏≠
       </div><button class="action-button" id="playAgainButton">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ÂÜçÁé©‰∏ÄÊ¨°</button>
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
    const vocabulary = [
      { char: '‰Ω†Â•Ω', pinyin: 'n«ê h«éo', meaning: '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ', alt: ['‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô', '‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì', '‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©'] },
      { char: 'Ë∞¢Ë∞¢', pinyin: 'xi√®xie', meaning: '‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì', alt: ['‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ', '‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô', '‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö'] },
      { char: 'ÂÜçËßÅ', pinyin: 'z√†iji√†n', meaning: '‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô', alt: ['‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤', '‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©'] },
      { char: 'ÂØπ‰∏çËµ∑', pinyin: 'du√¨buq«ê', meaning: '‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©', alt: ['‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ', '‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì', '‡πÉ‡∏ä‡πà'] },
      { char: 'ÊòØ', pinyin: 'sh√¨', meaning: '‡πÉ‡∏ä‡πà/‡πÄ‡∏õ‡πá‡∏ô', alt: ['‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà', '‡∏≠‡∏≤‡∏à‡∏à‡∏∞', '‡πÉ‡∏Ñ‡∏£'] },
      { char: '‰∏ç', pinyin: 'b√π', meaning: '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà', alt: ['‡πÉ‡∏ä‡πà', '‡∏î‡∏µ', '‡πÑ‡∏°‡πà‡∏î‡∏µ'] },
      { char: 'Â•Ω', pinyin: 'h«éo', meaning: '‡∏î‡∏µ', alt: ['‡πÑ‡∏°‡πà‡∏î‡∏µ', '‡πÉ‡∏´‡∏ç‡πà', '‡πÄ‡∏•‡πá‡∏Å'] },
      { char: 'Â§ß', pinyin: 'd√†', meaning: '‡πÉ‡∏´‡∏ç‡πà', alt: ['‡πÄ‡∏•‡πá‡∏Å', '‡∏î‡∏µ', '‡πÉ‡∏´‡∏°‡πà'] },
      { char: 'Â∞è', pinyin: 'xi«éo', meaning: '‡πÄ‡∏•‡πá‡∏Å', alt: ['‡πÉ‡∏´‡∏ç‡πà', '‡πÄ‡∏Å‡πà‡∏≤', '‡∏£‡πâ‡∏≠‡∏ô'] },
      { char: 'Áà±', pinyin: '√†i', meaning: '‡∏£‡∏±‡∏Å', alt: ['‡πÄ‡∏Å‡∏•‡∏µ‡∏¢‡∏î', '‡∏ä‡∏≠‡∏ö', '‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£'] },
      { char: 'ÂêÉ', pinyin: 'chƒ´', meaning: '‡∏Å‡∏¥‡∏ô', alt: ['‡∏î‡∏∑‡πà‡∏°', '‡∏ô‡∏≠‡∏ô', '‡∏ß‡∏¥‡πà‡∏á'] },
      { char: 'Âñù', pinyin: 'hƒì', meaning: '‡∏î‡∏∑‡πà‡∏°', alt: ['‡∏Å‡∏¥‡∏ô', '‡πÄ‡∏î‡∏¥‡∏ô', '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô'] },
      { char: 'Â≠¶‰π†', pinyin: 'xu√©x√≠', meaning: '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', alt: ['‡πÄ‡∏•‡πà‡∏ô', '‡∏ó‡∏≥‡∏á‡∏≤‡∏ô', '‡∏ô‡∏≠‡∏ô'] },
      { char: 'ÊúãÂèã', pinyin: 'p√©ngyou', meaning: '‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô', alt: ['‡∏Ñ‡∏£‡∏π', '‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', '‡∏û‡πà‡∏≠‡πÅ‡∏°‡πà'] },
      { char: 'ËÄÅÂ∏à', pinyin: 'l«éoshƒ´', meaning: '‡∏Ñ‡∏£‡∏π', alt: ['‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', '‡∏´‡∏°‡∏≠', '‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô'] }
    ];

    // User Management
    const users = {
      admin: { password: 'admin123', role: 'admin' }
    };

    let currentUser = null;
    let currentQuestion = 0;
    let score = 0;
    let streak = 0;
    let correctAnswers = 0;
    let isAnswered = false;
    let currentGame = 'quiz';
    let currentStage = 1;
    let totalCoins = 0;
    let unlockedStages = [1];
    let highScore = 0;
    
    let selectedChinese = null;
    let selectedThai = null;
    let matchedPairs = 0;
    
    let flippedCards = [];
    let matchedCards = 0;
    
    const stageConfig = [
      { stage: 1, name: '‡∏î‡πà‡∏≤‡∏ô 1: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô', cost: 0, difficulty: '‡∏á‡πà‡∏≤‡∏¢', vocabCount: 5, questions: 5, reward: 10 },
      { stage: 2, name: '‡∏î‡πà‡∏≤‡∏ô 2: ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô', cost: 30, difficulty: '‡∏á‡πà‡∏≤‡∏¢', vocabCount: 8, questions: 8, reward: 15 },
      { stage: 3, name: '‡∏î‡πà‡∏≤‡∏ô 3: ‡∏ù‡∏∂‡∏Å‡∏ù‡∏ô', cost: 50, difficulty: '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á', vocabCount: 10, questions: 10, reward: 20 },
      { stage: 4, name: '‡∏î‡πà‡∏≤‡∏ô 4: ‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢', cost: 80, difficulty: '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á', vocabCount: 12, questions: 12, reward: 25 },
      { stage: 5, name: '‡∏î‡πà‡∏≤‡∏ô 5: ‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç', cost: 120, difficulty: '‡∏¢‡∏≤‡∏Å', vocabCount: 15, questions: 15, reward: 30 },
      { stage: 6, name: '‡∏î‡πà‡∏≤‡∏ô 6: ‡∏¢‡∏≠‡∏î‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', cost: 150, difficulty: '‡∏¢‡∏≤‡∏Å', vocabCount: 15, questions: 15, reward: 35 },
      { stage: 7, name: '‡∏î‡πà‡∏≤‡∏ô 7: ‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå', cost: 200, difficulty: '‡∏¢‡∏≤‡∏Å‡∏°‡∏≤‡∏Å', vocabCount: 15, questions: 15, reward: 40 },
      { stage: 8, name: '‡∏î‡πà‡∏≤‡∏ô 8: ‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô‡∏†‡∏≤‡∏©‡∏≤', cost: 250, difficulty: '‡∏¢‡∏≤‡∏Å‡∏°‡∏≤‡∏Å', vocabCount: 15, questions: 15, reward: 45 },
      { stage: 9, name: '‡∏î‡πà‡∏≤‡∏ô 9: ‡∏ï‡∏≥‡∏ô‡∏≤‡∏ô', cost: 300, difficulty: '‡∏¢‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î', vocabCount: 15, questions: 15, reward: 50 },
      { stage: 10, name: '‡∏î‡πà‡∏≤‡∏ô 10: ‡πÄ‡∏ó‡∏û‡πÄ‡∏à‡πâ‡∏≤', cost: 400, difficulty: '‡∏¢‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î', vocabCount: 15, questions: 15, reward: 100 }
    ];

    // Page Navigation
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });
      document.getElementById(pageId).classList.add('active');
    }

    document.getElementById('startGameButton').addEventListener('click', () => {
      currentUser = { username: 'guest', role: 'player' };
      showPage('gamePage');
      showPlayerGame();

      // ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 3 ‡πÄ‡∏Å‡∏°
      goToMenu();
    });

    // Admin Login Button - Go to Game Page and show login
    document.getElementById('adminLoginButton').addEventListener('click', () => {
      showPage('gamePage');
      document.getElementById('adminLoginScreen').style.display = 'flex';
    });

    // Cancel Login Button - Back to Welcome Page
    document.getElementById('cancelLoginButton').addEventListener('click', () => {
      showPage('welcomePage');
      document.getElementById('adminLoginScreen').style.display = 'none';
      document.getElementById('username').value = '';
      document.getElementById('password').value = '';
    });

    // Login System
    document.getElementById('loginForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      if (users[username] && users[username].password === password) {
        currentUser = { username, role: users[username].role };
        handleLogin();
      } else {
        showToast('‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! Áî®Êà∑ÂêçÊàñÂØÜÁ†ÅÈîôËØØÔºÅ', '#dc143c');
      }
    });

    function handleLogin() {
      document.getElementById('adminLoginScreen').style.display = 'none';
      
      if (currentUser.role === 'admin') {
        showAdminPanel();
      } else {
        showPlayerGame();
      }
    }

    function showAdminPanel() {
      document.getElementById('adminPanel').style.display = 'flex';
      document.getElementById('playerGameArea').style.display = 'none';
      document.getElementById('adminUsername').textContent = currentUser.username;
      loadGameData();
      updateAdminDisplay();
    }

    function showPlayerGame() {
      document.getElementById('playerGameArea').style.display = 'block';
      document.getElementById('adminPanel').style.display = 'none';
      document.getElementById('adminLoginScreen').style.display = 'none';
      
      if (currentUser.username !== 'guest') {
        document.getElementById('playerUsername').textContent = currentUser.username;
      } else {
        document.querySelector('#playerGameArea .user-info').style.display = 'none';
      }
      loadGameData();
      goToMenu();
    }

    function logout() {
      currentUser = null;
      showPage('welcomePage');
      document.getElementById('adminPanel').style.display = 'none';
      document.getElementById('playerGameArea').style.display = 'none';
      document.getElementById('adminLoginScreen').style.display = 'none';
      document.getElementById('username').value = '';
      document.getElementById('password').value = '';
      document.querySelector('#playerGameArea .user-info').style.display = 'block';
    }

    // Admin Controls
    document.getElementById('addCoinsBtn').addEventListener('click', () => {
      const amount = parseInt(document.getElementById('coinAmount').value) || 0;
      if (amount > 0) {
        totalCoins += amount;
        saveGameProgress();
        updateAdminDisplay();
        showToast(`‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç ${amount} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ÊàêÂäüÂä† ${amount} ÈáëÂ∏ÅÔºÅ`, '#22c55e');
      }
    });

    document.getElementById('resetGameBtn').addEventListener('click', () => {
      const btn = document.getElementById('resetGameBtn');
      const originalText = btn.textContent;
      
      btn.textContent = '‚ö†Ô∏è ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô';
      btn.style.background = 'linear-gradient(135deg, #ff0000 0%, #dc143c 100%)';
      
      const confirmReset = () => {
        totalCoins = 0;
        unlockedStages = [1];
        highScore = 0;
        score = 0;
        saveGameProgress();
        updateAdminDisplay();
        showToast('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! Ê∏∏ÊàèÈáçÁΩÆÊàêÂäüÔºÅ', '#3b82f6');
        
        btn.textContent = originalText;
        btn.style.background = '';
        btn.onclick = firstClick;
      };
      
      const firstClick = () => {
        btn.textContent = '‚ö†Ô∏è ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô';
        btn.style.background = 'linear-gradient(135deg, #ff0000 0%, #dc143c 100%)';
        btn.onclick = confirmReset;
        
        setTimeout(() => {
          btn.textContent = originalText;
          btn.style.background = '';
          btn.onclick = firstClick;
        }, 3000);
      };
      
      btn.onclick = confirmReset;
      
      setTimeout(() => {
        btn.textContent = originalText;
        btn.style.background = '';
        btn.onclick = firstClick;
      }, 3000);
    });

    document.getElementById('adminLogout').addEventListener('click', logout);
    document.getElementById('playerLogout').addEventListener('click', logout);

    function updateAdminDisplay() {
      document.getElementById('adminCoinDisplay').textContent = totalCoins;
      document.getElementById('adminHighScore').textContent = highScore;
      document.getElementById('adminUnlockedStages').textContent = unlockedStages.length;
    }

    // Game Functions
    function loadGameData() {
      const savedData = localStorage.getItem('chineseGameData');
      if (savedData) {
        const data = JSON.parse(savedData);
        totalCoins = data.totalCoins || 0;
        unlockedStages = data.unlockedStages || [1];
        highScore = data.highScore || 0;
      }
      updateCoinDisplay();
      if (currentUser && currentUser.role === 'admin') {
        updateAdminDisplay();
      }
    }

    function saveGameProgress() {
      const data = {
        totalCoins: totalCoins,
        unlockedStages: unlockedStages,
        highScore: Math.max(highScore, score),
        lastScore: score,
        timestamp: new Date().toISOString()
      };
      localStorage.setItem('chineseGameData', JSON.stringify(data));
      highScore = data.highScore;
    }
    
    function updateCoinDisplay() {
      document.getElementById('coinValue').textContent = totalCoins;
      document.getElementById('menuCoins').textContent = totalCoins + ' ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç';
      document.getElementById('shopCoins').textContent = totalCoins + ' ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç';
      document.getElementById('stageSelectCoins').textContent = totalCoins + ' ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç';
    }

    function showToast(message, bgColor) {
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      toast.style.backgroundColor = bgColor;
      document.body.appendChild(toast);

      setTimeout(() => {
        toast.remove();
      }, 3000);
    }

    function updateStats() {
      document.getElementById('coinValue').textContent = totalCoins;
      document.getElementById('scoreValue').textContent = score;
      document.getElementById('stageValue').textContent = currentStage;
      document.getElementById('streakValue').textContent = streak;
    }

    function shuffleArray(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    function showResults() {
      document.getElementById('quizScreen').classList.remove('active');
      document.getElementById('matchingGame').classList.remove('active');
      document.getElementById('memoryGame').classList.remove('active');
      document.getElementById('resultScreen').style.display = 'block';
      
      const stageInfo = stageConfig[currentStage - 1];
      let totalQuestions = stageInfo.questions;
      if (currentGame === 'matching') totalQuestions = 6;
      if (currentGame === 'memory') totalQuestions = 8;
      
      const coinsEarned = Math.floor((correctAnswers / totalQuestions) * stageInfo.reward);
      totalCoins += coinsEarned;
      
      const percentage = (correctAnswers / totalQuestions) * 100;
      if (percentage >= 60 && currentStage < 10 && !unlockedStages.includes(currentStage + 1)) {
        unlockedStages.push(currentStage + 1);
        showToast('‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏î‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß! Ëß£ÈîÅÊñ∞ÂÖ≥Âç°ÔºÅüéâ', '#22c55e');
      }
      
      document.getElementById('finalScore').textContent = score + ' ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô';
      document.getElementById('resultDetails').textContent = `‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å ${correctAnswers} ‡∏à‡∏≤‡∏Å ${totalQuestions} ‡∏Ç‡πâ‡∏≠\n‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ${coinsEarned} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç! üí∞`;
      
      let message = '‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ÁúüÊ£íÔºÅ';
      let icon = 'üèÜ';
      
      if (percentage === 100) {
        message = '‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏ö‡∏ö! ÂÆåÁæéÔºÅ';
        icon = 'üåü';
      } else if (percentage >= 80) {
        message = '‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! ÂæàÂ•ΩÔºÅ';
        icon = 'üèÜ';
      } else if (percentage >= 60) {
        message = '‡∏î‡∏µ‡∏°‡∏≤‡∏Å! ‰∏çÈîôÔºÅ';
        icon = 'üëç';
      } else {
        message = '‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏õ! Âä†Ê≤πÔºÅ';
        icon = 'üí™';
      }
      
      document.getElementById('resultMessage').textContent = message;
      document.querySelector('#resultScreen .start-icon').textContent = icon;
      
      updateCoinDisplay();
      saveGameProgress();
    }
    
    function showShop() {
      document.getElementById('menuScreen').style.display = 'none';
      document.getElementById('shopScreen').style.display = 'block';
      updateCoinDisplay();
      renderShop();
    }
    
    function renderShop() {
      const stageList = document.getElementById('stageList');
      stageList.innerHTML = '';
      
      stageConfig.forEach(stage => {
        const isUnlocked = unlockedStages.includes(stage.stage);
        const canAfford = totalCoins >= stage.cost;
        
        const card = document.createElement('div');
        card.style.padding = '20px';
        card.style.borderRadius = '12px';
        card.style.boxShadow = '0 4px 12px rgba(0,0,0,0.4)';
        card.style.background = 'linear-gradient(135deg, #8b0000 0%, #dc143c 100%)';
        card.style.border = '3px solid #ffd700';
        card.style.color = '#ffe4b5';
        card.style.opacity = isUnlocked ? '1' : (canAfford ? '0.9' : '0.5');
        card.style.cursor = (isUnlocked || !canAfford) ? 'default' : 'pointer';
        card.style.transition = 'all 0.3s';
        
        let icon = 'üîí';
        let statusText = `‡∏£‡∏≤‡∏Ñ‡∏≤: ${stage.cost} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç`;
        
        if (isUnlocked) {
          icon = '‚úÖ';
          statusText = '‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÅ‡∏•‡πâ‡∏ß';
        } else if (!canAfford) {
          icon = 'üîí';
          statusText = `‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ${stage.cost - totalCoins} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡πÄ‡∏û‡∏¥‡πà‡∏°`;
        }
        
        card.innerHTML = `
          <div style="font-size: 40px; margin-bottom: 8px;">${icon}</div>
          <div style="font-size: 18px; font-weight: bold; margin-bottom: 8px; color: #ffd700;">${stage.name}</div>
          <div style="font-size: 14px; opacity: 0.8; margin-bottom: 8px;">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å: ${stage.difficulty}</div>
          <div style="font-size: 14px; opacity: 0.8; margin-bottom: 8px;">${stage.questions} ‡∏Ç‡πâ‡∏≠ | ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•: ${stage.reward} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç</div>
          <div style="font-size: 16px; font-weight: bold; margin-top: 12px; color: #ffe4b5;">${statusText}</div>
        `;
        
        if (!isUnlocked && canAfford) {
          card.onmouseenter = () => {
            card.style.transform = 'translateY(-4px)';
            card.style.boxShadow = '0 8px 20px rgba(255, 215, 0, 0.4)';
          };
          card.onmouseleave = () => {
            card.style.transform = 'translateY(0)';
            card.style.boxShadow = '0 4px 12px rgba(0,0,0,0.4)';
          };
          card.onclick = () => unlockStage(stage.stage);
        }
        
        stageList.appendChild(card);
      });
    }
    
    function unlockStage(stageNum) {
      const stage = stageConfig[stageNum - 1];
      
      if (unlockedStages.includes(stageNum)) {
        showToast('‡∏î‡πà‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÅ‡∏•‡πâ‡∏ß! Ê≠§ÂÖ≥Âç°Â∑≤Ëß£ÈîÅÔºÅ', '#3b82f6');
        return;
      }
      
      if (totalCoins < stage.cost) {
        showToast('‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡πÑ‡∏°‡πà‡∏û‡∏≠! ÈáëÂ∏Å‰∏çË∂≥ÔºÅüí∞', '#dc143c');
        return;
      }
      
      totalCoins -= stage.cost;
      unlockedStages.push(stageNum);
      unlockedStages.sort((a, b) => a - b);
      
      showToast(`‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ ${stage.name} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! Ëß£ÈîÅÊàêÂäüÔºÅüéâ`, '#22c55e');
      updateCoinDisplay();
      saveGameProgress();
      renderShop();
    }
    
    function showStageSelect(gameType) {
      currentGame = gameType;
      document.getElementById('menuScreen').style.display = 'none';
      document.getElementById('stageSelectScreen').style.display = 'block';
      
      let gameTitle = '';
      if (gameType === 'quiz') gameTitle = '‡∏ó‡∏≤‡∏¢‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå';
      else if (gameType === 'matching') gameTitle = '‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Ñ‡∏≥';
      else if (gameType === 'memory') gameTitle = '‡πÄ‡∏Å‡∏°‡∏à‡∏≥‡∏Ñ‡∏≥';
      
      document.getElementById('gameTypeTitle').textContent = `‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡πà‡∏≤‡∏ô - ${gameTitle}`;
      updateCoinDisplay();
      renderStageSelect();
    }
    
    function renderStageSelect() {
      const stageList = document.getElementById('stageSelectList');
      stageList.innerHTML = '';
      
      stageConfig.forEach(stage => {
        const isUnlocked = unlockedStages.includes(stage.stage);
        
        const card = document.createElement('div');
        card.style.padding = '20px';
        card.style.borderRadius = '12px';
        card.style.boxShadow = '0 4px 12px rgba(0,0,0,0.4)';
        card.style.background = 'linear-gradient(135deg, #8b0000 0%, #dc143c 100%)';
        card.style.border = '3px solid #ffd700';
        card.style.color = '#ffe4b5';
        card.style.cursor = isUnlocked ? 'pointer' : 'not-allowed';
        card.style.opacity = isUnlocked ? '1' : '0.5';
        card.style.transition = 'all 0.3s';
        card.style.width = '180px';
        card.style.textAlign = 'center';
        
        if (isUnlocked) {
          card.onmouseenter = () => {
            card.style.transform = 'translateY(-4px)';
            card.style.boxShadow = '0 8px 20px rgba(255, 215, 0, 0.4)';
          };
          card.onmouseleave = () => {
            card.style.transform = 'translateY(0)';
            card.style.boxShadow = '0 4px 12px rgba(0,0,0,0.4)';
          };
          card.onclick = () => startGameWithStage(stage.stage);
        } else {
          card.onclick = () => showToast('‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏î‡πà‡∏≤‡∏ô‡πÉ‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô! ËØ∑ÂÖàÂú®ÂïÜÂ∫óËß£ÈîÅÔºÅüè™', '#dc143c');
        }
        
        let icon = isUnlocked ? 'üéÆ' : 'üîí';
        let statusText = isUnlocked ? '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô' : '‡∏õ‡∏¥‡∏î‡∏•‡πá‡∏≠‡∏Ñ';
        
        card.innerHTML = `
          <div style="font-size: 32px; margin-bottom: 8px;">${icon}</div>
          <div style="font-size: 16px; font-weight: bold; margin-bottom: 4px; color: #ffd700;">‡∏î‡πà‡∏≤‡∏ô ${stage.stage}</div>
          <div style="font-size: 13px; opacity: 0.8;">${stage.difficulty}</div>
          <div style="font-size: 12px; opacity: 0.7; margin-top: 4px;">${statusText}</div>
        `;
        
        stageList.appendChild(card);
      });
    }

    function loadQuestion() {
      const stageInfo = stageConfig[currentStage - 1];
      
      if (currentQuestion >= stageInfo.questions) {
        showResults();
        return;
      }

      const vocabSet = vocabulary.slice(0, stageInfo.vocabCount);
      const word = vocabSet[Math.floor(Math.random() * vocabSet.length)];
      
      document.getElementById('chineseChar').textContent = word.char;
      
      if (currentStage >= 3) {
        document.getElementById('pinyinText').style.display = 'none';
      } else {
        document.getElementById('pinyinText').style.display = 'block';
        document.getElementById('pinyinText').textContent = word.pinyin;
      }

      const wrongOptions = vocabSet
        .filter(v => v.meaning !== word.meaning)
        .map(v => v.meaning);
      const shuffledWrong = shuffleArray(wrongOptions);
      
      let numOptions = 4;
      if (currentStage >= 5) numOptions = 6;
      if (currentStage >= 8) numOptions = 8;
      
      const selectedWrong = shuffledWrong.slice(0, numOptions - 1);
      const options = shuffleArray([word.meaning, ...selectedWrong]);
      
      const optionsGrid = document.getElementById('optionsGrid');
      optionsGrid.innerHTML = '';
      
      if (numOptions === 6) {
        optionsGrid.style.gridTemplateColumns = 'repeat(3, 1fr)';
      } else if (numOptions === 8) {
        optionsGrid.style.gridTemplateColumns = 'repeat(4, 1fr)';
      } else {
        optionsGrid.style.gridTemplateColumns = 'repeat(2, 1fr)';
      }

      options.forEach(option => {
        const button = document.createElement('button');
        button.className = 'option-button';
        button.textContent = option;
        button.onclick = () => checkAnswer(option, word.meaning, button);
        optionsGrid.appendChild(button);
      });

      document.getElementById('feedback').textContent = '';
      document.getElementById('nextButton').style.display = 'none';
      isAnswered = false;
      updateStats();
    }

    function checkAnswer(selected, correct, button) {
      if (isAnswered) return;
      
      isAnswered = true;
      const buttons = document.querySelectorAll('.option-button');
      buttons.forEach(btn => btn.disabled = true);

      if (selected === correct) {
        button.classList.add('correct');
        document.getElementById('feedback').textContent = 'Ê≠£Á°ÆÔºÅ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! üéâ';
        document.getElementById('feedback').style.color = '#00ff00';
        const points = 10 * currentStage;
        score += points;
        streak++;
        correctAnswers++;
        showToast('+' + points + ' ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!', '#22c55e');
      } else {
        button.classList.add('incorrect');
        document.getElementById('feedback').textContent = 'ÈîôËØØÔºÅ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà! üí™';
        document.getElementById('feedback').style.color = '#ff6b6b';
        streak = 0;
        
        buttons.forEach(btn => {
          if (btn.textContent === correct) {
            btn.classList.add('correct');
          }
        });
      }

      updateStats();
      document.getElementById('nextButton').style.display = 'block';
    }

    function goToMenu() {
      // ‡∏ã‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏Å‡∏°
      document.getElementById('quizScreen').classList.remove('active');
      document.getElementById('matchingGame').classList.remove('active');
      document.getElementById('memoryGame').classList.remove('active');
      document.getElementById('resultScreen').style.display = 'none';
      document.getElementById('stageSelectScreen').style.display = 'none';
      document.getElementById('shopScreen').style.display = 'none';

      // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 3 ‡πÄ‡∏Å‡∏°
      document.getElementById('menuScreen').style.display = 'block';

      // ‡πÅ‡∏™‡∏î‡∏á header + stats
      document.getElementById('header').style.display = 'block';
      document.getElementById('statsBar').style.display = 'flex';
      
      score = 0;
      streak = 0;
      correctAnswers = 0;
      updateStats();
      updateCoinDisplay();
    }

    function startGameWithStage(stageNum) {
      currentStage = stageNum;
      currentQuestion = 0;
      score = 0;
      streak = 0;
      correctAnswers = 0;
      
      document.getElementById('header').style.display = 'block';
      document.getElementById('statsBar').style.display = 'flex';
      document.getElementById('stageSelectScreen').style.display = 'none';
      document.getElementById('resultScreen').style.display = 'none';
      
      if (currentGame === 'quiz') {
        document.getElementById('quizScreen').classList.add('active');
        updateStats();
        loadQuestion();
      } else if (currentGame === 'matching') {
        document.getElementById('matchingGame').classList.add('active');
        updateStats();
        loadMatchingGame();
      } else if (currentGame === 'memory') {
        document.getElementById('memoryGame').classList.add('active');
        updateStats();
        loadMemoryGame();
      }
    }

    function loadMatchingGame() {
      matchedPairs = 0;
      selectedChinese = null;
      selectedThai = null;
      
      const matchWords = shuffleArray(vocabulary.slice(0, 6));
      
      const chineseCol = document.getElementById('chineseColumn');
      const thaiCol = document.getElementById('thaiColumn');
      chineseCol.innerHTML = '';
      thaiCol.innerHTML = '';
      
      const shuffledThai = shuffleArray([...matchWords]);
      
      matchWords.forEach((word) => {
        const btn = document.createElement('button');
        btn.className = 'option-button';
        btn.textContent = word.char;
        btn.dataset.meaning = word.meaning;
        btn.onclick = () => selectChinese(btn);
        chineseCol.appendChild(btn);
      });
      
      shuffledThai.forEach((word) => {
        const btn = document.createElement('button');
        btn.className = 'option-button';
        btn.textContent = word.meaning;
        btn.dataset.meaning = word.meaning;
        btn.onclick = () => selectThai(btn);
        thaiCol.appendChild(btn);
      });
      
      document.getElementById('matchFeedback').textContent = '';
    }

    function selectChinese(btn) {
      if (btn.disabled) return;
      
      if (selectedChinese) {
        selectedChinese.style.borderColor = '#ffd700';
      }
      selectedChinese = btn;
      btn.style.borderColor = '#00ffff';
      
      if (selectedThai) {
        checkMatch();
      }
    }

    function selectThai(btn) {
      if (btn.disabled) return;
      
      if (selectedThai) {
        selectedThai.style.borderColor = '#ffd700';
      }
      selectedThai = btn;
      btn.style.borderColor = '#00ffff';
      
      if (selectedChinese) {
        checkMatch();
      }
    }

    function checkMatch() {
      if (selectedChinese.dataset.meaning === selectedThai.dataset.meaning) {
        selectedChinese.classList.add('correct');
        selectedThai.classList.add('correct');
        selectedChinese.disabled = true;
        selectedThai.disabled = true;
        
        document.getElementById('matchFeedback').textContent = 'Ê≠£Á°ÆÔºÅ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! üéâ';
        document.getElementById('matchFeedback').style.color = '#00ff00';
        
        score += 20 * currentStage;
        correctAnswers++;
        matchedPairs++;
        showToast(`+${20 * currentStage} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`, '#22c55e');
        
        if (matchedPairs === 6) {
          setTimeout(showResults, 1000);
        }
      } else {
        document.getElementById('matchFeedback').textContent = 'ÈîôËØØÔºÅ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà! üí™';
        document.getElementById('matchFeedback').style.color = '#ff6b6b';
        
        setTimeout(() => {
          if (selectedChinese) selectedChinese.style.borderColor = '#ffd700';
          if (selectedThai) selectedThai.style.borderColor = '#ffd700';
          document.getElementById('matchFeedback').textContent = '';
        }, 1000);
      }
      
      selectedChinese = null;
      selectedThai = null;
      updateStats();
    }

    function loadMemoryGame() {
      matchedCards = 0;
      flippedCards = [];
      
      const memoryWords = vocabulary.slice(0, 8);
      const cards = [];
      
      memoryWords.forEach(word => {
        cards.push({ type: 'chinese', content: word.char, id: word.char });
        cards.push({ type: 'thai', content: word.meaning, id: word.char });
      });
      
      const shuffledCards = shuffleArray(cards);
      const grid = document.getElementById('memoryGrid');
      grid.innerHTML = '';
      
      shuffledCards.forEach((card) => {
        const cardEl = document.createElement('button');
        cardEl.className = 'option-button';
        cardEl.textContent = 'üÄÑ';
        cardEl.dataset.id = card.id;
        cardEl.dataset.content = card.content;
        cardEl.dataset.flipped = 'false';
        cardEl.style.fontSize = '32px';
        cardEl.style.height = '80px';
        cardEl.onclick = () => flipCard(cardEl);
        grid.appendChild(cardEl);
      });
      
      document.getElementById('memoryFeedback').textContent = '';
    }

    function flipCard(card) {
      if (card.dataset.flipped === 'true' || flippedCards.length >= 2) return;
      
      card.textContent = card.dataset.content;
      card.dataset.flipped = 'true';
      flippedCards.push(card);
      
      if (flippedCards.length === 2) {
        setTimeout(checkMemoryMatch, 800);
      }
    }

    function checkMemoryMatch() {
      const [card1, card2] = flippedCards;
      
      if (card1.dataset.id === card2.dataset.id) {
        card1.classList.add('correct');
        card2.classList.add('correct');
        card1.disabled = true;
        card2.disabled = true;
        
        document.getElementById('memoryFeedback').textContent = 'Ê≠£Á°ÆÔºÅ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! üéâ';
        document.getElementById('memoryFeedback').style.color = '#00ff00';
        
        score += 30 * currentStage;
        correctAnswers++;
        matchedCards++;
        showToast(`+${30 * currentStage} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`, '#22c55e');
        
        if (matchedCards === 8) {
          setTimeout(showResults, 1000);
        }
      } else {
        card1.textContent = 'üÄÑ';
        card2.textContent = 'üÄÑ';
        card1.dataset.flipped = 'false';
        card2.dataset.flipped = 'false';
        
        document.getElementById('memoryFeedback').textContent = '‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà! Âä†Ê≤πÔºÅüí™';
        document.getElementById('memoryFeedback').style.color = '#ff6b6b';
        
        setTimeout(() => {
          document.getElementById('memoryFeedback').textContent = '';
        }, 1000);
      }
      
      flippedCards = [];
      updateStats();
    }

    function restartGame() {
      showStageSelect(currentGame);
    }

    // Event Listeners
    document.getElementById('homeButton').onclick = goToMenu;
    document.getElementById('homeButton2').onclick = goToMenu;
    document.getElementById('homeButton3').onclick = goToMenu;
    document.getElementById('backToMenu').onclick = goToMenu;
    document.getElementById('backToMenu2').onclick = goToMenu;
    
    document.getElementById('shopButton').onclick = showShop;
    document.getElementById('quizCard').onclick = () => showStageSelect('quiz');
    document.getElementById('matchCard').onclick = () => showStageSelect('matching');
    document.getElementById('memoryCard').onclick = () => showStageSelect('memory');
    
    document.getElementById('playAgainButton').onclick = restartGame;
    document.getElementById('nextButton').onclick = () => {
      currentQuestion++;
      loadQuestion();
    };
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c045db92403894f',t:'MTc2ODgwNTA5My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>